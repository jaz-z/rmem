/*
 Setup your scale and start the sketch WITHOUT a weight on the scale
 Once readings are displayed place the weight on the scale
 Press +/- or a/z to adjust the calibration_factor until the output readings match the known weight
 Arduino pin 6 -> HX711 CLK
 Arduino pin 5 -> HX711 DOUT
 Arduino pin 5V -> HX711 VCC
 Arduino pin GND -> HX711 GND
 
 The HX711 board can be powered from 2.7V to 5V so the Arduino 5V power should be fine.
 
 The HX711 library can be downloaded from here: https://github.com/bogde/HX711
*/

#include "HX711.h"
#define DOUT 5
#define CLK  6
HX711 scale(DOUT, CLK);
float calibration_factor = 2125; //-7050 worked for my 440lb max scale setup
float weight = 0;

long Array[] = {};
float size_Array = 0;
long y = 0;
bool y_valid;
int n=0;

void setup() {
  Serial.begin(9600);
  scale.set_scale();
  scale.tare();	//Reset the scale to 0
  long zero_factor = scale.read_average(); //Get a baseline reading
  Serial.print("Zero factor: "); //This can be used to remove the need to tare the scale. Useful in permanent scale projects.
  Serial.println(zero_factor);
}

void loop() {
  scale.set_scale(calibration_factor); //Adjust to this calibration factor
  weight = scale.get_units();
  Serial.println(weight);
  
  y_valid = false;
  for (int x = 0; x < size_Array; x++) {
      if (y == Array[x]) y_valid = true;
  } 
  if (y_valid = true){
  // playback what is connected to y
  }
  else{
  Array[n] = weight;
  size_Array = size_Array+1;
  n = n+1;
  // record and connect to y
  }
}
